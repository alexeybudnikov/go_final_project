# Итоговый проект "Планировщик задач"

Приложение управляет созданием, редактированием, переносом задач.

 ## Структура проекта

 `/cmd` - директория с файлами запуска сервера приложения

 `/internal` - директория с логикой бекенда 

 `/internal/api` - реализованы обработчики запросов, авторизация, роутинг

 `/internal/database` - директория с файлами настройки БД, скрипты для миграций

 `/internal/models` - содержит описание моделей задач, ответов сервера

 `/internal/repository` - содержит файлы работы с БД, запросы и пр.

 `/internal/service` - бизнес логика бекенда

 `/tests` - тесты для проверки проекта

 `/web` - директория с файлми фронтенда

 `/utils` - утилиты определения хоста, работы с временем.

 `.env` - файл с переменными окружения

 ## Переменные окружения 

`TODO_PORT` - порт на котором запустится приложение, по умолчанию используется порт 7540

`TODO_DBFILE` - хранит путь к базе данных, по умолчанию ищет базу данных scheduler.db в корне проекта 

`TODO_PASSWORD` - пароль для логина в приложение, генерации и валидации JWT токена

## Тестирование

Для запуск тестов необходимо:

1. Запустить приложение командой `go run cmd/main.go` (для Windows `CGO_ENABLED=1 go run cmd/main.go `)
2. Получить свежий токен авторизации запросом к эндпоинту `/api/signin`
```
curl --location 'http://localhost:7540/api/signin' \
--header 'Content-Type: application/json' \
--data '{
    "password": "12345"
}'
```
, где password - пароль для авторизации (см. `TODO_PASSWORD`)

Ответ от сервиса будет вида:
```
{"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MzY4NDc0MDV9.TIhvrj-zFPIFaQ2QUfZsLW74eFe4oSM6u2hSRNuKiQI"}
```

3. Полученый токен прописать в файле `tests/setings.go` для переменной `Token`
4. Запустить тесты `go test ./tests`
